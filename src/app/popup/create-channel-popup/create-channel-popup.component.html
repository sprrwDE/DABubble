<section
  *ngIf="!showCreateChannelAddPeoplePopup"
  class="flex flex-col gap-[20px]"
>
  <div class="flex w-full items-center justify-between">
    <h2 class="text-[24px] font-bold">Channel erstellen</h2>

    <div
      (click)="closePopup()"
      class="hover-primary-bg rounded-full p-[5px] transition-svg-text"
    >
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <mask
          id="mask0_105201_6560"
          style="mask-type: alpha"
          maskUnits="userSpaceOnUse"
          x="0"
          y="0"
          width="24"
          height="24"
        >
          <rect width="24" height="24" fill="#D9D9D9" />
        </mask>
        <g mask="url(#mask0_105201_6560)">
          <path
            d="M12 13.4L7.10005 18.3C6.91672 18.4833 6.68338 18.575 6.40005 18.575C6.11672 18.575 5.88338 18.4833 5.70005 18.3C5.51672 18.1167 5.42505 17.8833 5.42505 17.6C5.42505 17.3167 5.51672 17.0833 5.70005 16.9L10.6 12L5.70005 7.09999C5.51672 6.91665 5.42505 6.68332 5.42505 6.39999C5.42505 6.11665 5.51672 5.88332 5.70005 5.69999C5.88338 5.51665 6.11672 5.42499 6.40005 5.42499C6.68338 5.42499 6.91672 5.51665 7.10005 5.69999L12 10.6L16.9 5.69999C17.0834 5.51665 17.3167 5.42499 17.6 5.42499C17.8834 5.42499 18.1167 5.51665 18.3 5.69999C18.4834 5.88332 18.575 6.11665 18.575 6.39999C18.575 6.68332 18.4834 6.91665 18.3 7.09999L13.4 12L18.3 16.9C18.4834 17.0833 18.575 17.3167 18.575 17.6C18.575 17.8833 18.4834 18.1167 18.3 18.3C18.1167 18.4833 17.8834 18.575 17.6 18.575C17.3167 18.575 17.0834 18.4833 16.9 18.3L12 13.4Z"
            fill="black"
          />
        </g>
      </svg>
    </div>
  </div>
  <p>
    Channels dienen deinem Team zur Kommunikation. Am besten sollten sie
    themenbezogen sein #marketing zum Beispiel.
  </p>

  <div class="flex flex-col gap-[20px]">
    <h3 class="text-[18px] font-bold">Channel-Name</h3>

    <div (click)="channelName.focus()" class="popup-input-container">
      <svg
        width="23"
        height="24"
        viewBox="0 0 23 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <mask
          id="mask0_105201_6568"
          style="mask-type: alpha"
          maskUnits="userSpaceOnUse"
          x="0"
          y="0"
          width="23"
          height="24"
        >
          <rect y="0.5" width="23" height="23" fill="#D9D9D9" />
        </mask>
        <g mask="url(#mask0_105201_6568)">
          <path
            d="M6.94787 19.6666C6.64439 19.6666 6.39683 19.5469 6.20516 19.3073C6.01349 19.0677 5.95759 18.8041 6.03745 18.5166L6.70828 15.8333H4.57599C4.25655 15.8333 4.00099 15.7097 3.80933 15.4624C3.61766 15.2145 3.56176 14.9389 3.64162 14.6354C3.68953 14.4118 3.80134 14.2361 3.97703 14.1083C4.15273 13.9805 4.35238 13.9166 4.57599 13.9166H7.18745L8.14578 10.0833H5.53433C5.21488 10.0833 4.95933 9.95969 4.76766 9.71244C4.57599 9.46455 4.52009 9.18887 4.59995 8.8854C4.64787 8.66179 4.75967 8.48609 4.93537 8.35831C5.11106 8.23054 5.31071 8.16665 5.53433 8.16665H8.62495L9.41558 5.0281C9.46349 4.82047 9.56731 4.65276 9.72703 4.52498C9.88676 4.3972 10.0784 4.33331 10.302 4.33331C10.6055 4.33331 10.8531 4.4531 11.0447 4.69269C11.2364 4.93227 11.2923 5.19581 11.2125 5.48331L10.5416 8.16665H14.375L15.1656 5.0281C15.2135 4.82047 15.3173 4.65276 15.477 4.52498C15.6368 4.3972 15.8284 4.33331 16.052 4.33331C16.3555 4.33331 16.6031 4.4531 16.7947 4.69269C16.9864 4.93227 17.0423 5.19581 16.9625 5.48331L16.2916 8.16665H18.4239C18.7434 8.16665 18.9989 8.29027 19.1906 8.53752C19.3822 8.78541 19.4381 9.06109 19.3583 9.36456C19.3104 9.58817 19.1986 9.76387 19.0229 9.89165C18.8472 10.0194 18.6475 10.0833 18.4239 10.0833H15.8125L14.8541 13.9166H17.4656C17.785 13.9166 18.0406 14.0403 18.2322 14.2875C18.4239 14.5354 18.4798 14.8111 18.4 15.1146C18.352 15.3382 18.2402 15.5139 18.0645 15.6416C17.8888 15.7694 17.6892 15.8333 17.4656 15.8333H14.375L13.5843 18.9719C13.5364 19.1795 13.4326 19.3472 13.2729 19.475C13.1131 19.6028 12.9215 19.6666 12.6979 19.6666C12.3944 19.6666 12.1468 19.5469 11.9552 19.3073C11.7635 19.0677 11.7076 18.8041 11.7875 18.5166L12.4583 15.8333H8.62495L7.83433 18.9719C7.78641 19.1795 7.68259 19.3472 7.52287 19.475C7.36314 19.6028 7.17148 19.6666 6.94787 19.6666ZM9.10412 13.9166H12.9375L13.8958 10.0833H10.0625L9.10412 13.9166Z"
            fill="#686868"
          />
        </g>
      </svg>

      <input
        #channelName
        [(ngModel)]="channel.name"
        type="text"
        placeholder="z.B. Kooperationsprojekte"
      />
    </div>
  </div>

  <p *ngIf="showErrorText" class="text-error mt-[-10px]">
    Bitte geben Sie einen Namen ein
  </p>

  <div class="flex flex-col gap-[20px]">
    <h3 class="text-[18px] font-bold">
      Beschreibung <span class="text-disable font-normal">(optional)</span>
    </h3>

    <div (click)="channelDescription.focus()" class="popup-input-container">
      <!-- icon -->
      <input
        #channelDescription
        type="text"
        [(ngModel)]="channel.description"
        placeholder="Dein Text hier"
      />
    </div>
  </div>

  <div class="flex justify-end">
    <button (click)="showAddUsersToChannelPopup()">Erstellen</button>
  </div>
</section>

<!-- Add users to channel popup-->
<section
  *ngIf="showCreateChannelAddPeoplePopup"
  class="min-w-[710px] flex flex-col gap-[20px]"
>
  <div class="flex w-full items-center justify-between">
    <h2 class="text-[24px] font-bold">Leute hinzufügen</h2>

    <div
      (click)="closePopup()"
      class="hover-primary-bg rounded-full p-[5px] transition-svg-text"
    >
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <mask
          id="mask0_105201_6560"
          style="mask-type: alpha"
          maskUnits="userSpaceOnUse"
          x="0"
          y="0"
          width="24"
          height="24"
        >
          <rect width="24" height="24" fill="#D9D9D9" />
        </mask>
        <g mask="url(#mask0_105201_6560)">
          <path
            d="M12 13.4L7.10005 18.3C6.91672 18.4833 6.68338 18.575 6.40005 18.575C6.11672 18.575 5.88338 18.4833 5.70005 18.3C5.51672 18.1167 5.42505 17.8833 5.42505 17.6C5.42505 17.3167 5.51672 17.0833 5.70005 16.9L10.6 12L5.70005 7.09999C5.51672 6.91665 5.42505 6.68332 5.42505 6.39999C5.42505 6.11665 5.51672 5.88332 5.70005 5.69999C5.88338 5.51665 6.11672 5.42499 6.40005 5.42499C6.68338 5.42499 6.91672 5.51665 7.10005 5.69999L12 10.6L16.9 5.69999C17.0834 5.51665 17.3167 5.42499 17.6 5.42499C17.8834 5.42499 18.1167 5.51665 18.3 5.69999C18.4834 5.88332 18.575 6.11665 18.575 6.39999C18.575 6.68332 18.4834 6.91665 18.3 7.09999L13.4 12L18.3 16.9C18.4834 17.0833 18.575 17.3167 18.575 17.6C18.575 17.8833 18.4834 18.1167 18.3 18.3C18.1167 18.4833 17.8834 18.575 17.6 18.575C17.3167 18.575 17.0834 18.4833 16.9 18.3L12 13.4Z"
            fill="black"
          />
        </g>
      </svg>
    </div>
  </div>

  <!--  -->
  <div
    (click)="showCreateChannelAddPeopleInput = false"
    class="flex items-center gap-[20px] cursor-pointer"
  >
    <!-- dot -->
    <div
      class="flex items-center justify-center border-[1px] border-lines rounded-full"
    >
      <div
        [ngClass]="{ 'opacity-0': showCreateChannelAddPeopleInput }"
        class="h-[12px] w-[12px] bg-primary rounded-full border-[3px] border-white box-content"
      ></div>
    </div>

    <p>
      Alle Mitglieder von <span class="text-hover">OfficeTeam</span> hinzufügen
    </p>
  </div>

  <!--  -->
  <div
    (click)="
      showCreateChannelAddPeopleInput = true;
      createChannelAddPeopleInput.focus()
    "
    class="flex items-center gap-[20px] cursor-pointer"
  >
    <!-- dot -->
    <div
      class="flex items-center justify-center border-[1px] border-lines rounded-full"
    >
      <div
        [ngClass]="{ 'opacity-0': !showCreateChannelAddPeopleInput }"
        class="h-[12px] w-[12px] bg-primary rounded-full border-[3px] border-white box-content"
        (clearInputEvent)="handleClearInput()"
      ></div>
    </div>

    <p>Bestimmte Leute hinzufügen</p>
  </div>

  <!-- Pills -->
  <div
    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 mt-2 w-full max-w-[710px]"
  >
    @if (addUserService.userToAdd.length > 0) { @for (user of
    addUserService.userToAdd; track $index) {
    <div
      class="flex items-center justify-between h-[40px] p-[3px_20px] gap-[15px] rounded-full bg-[#ECEEFE] opacity-100"
    >
      <div class="flex items-center gap-4">
        <img
          class="h-[24px] w-[24px] rounded-full"
          src="{{ user.image || 'imgs/avatar/profile.svg' }}"
        />
        <span class="truncate min-w-0">{{ user.name }}</span>
      </div>
      <span
        class="cursor-pointer"
        (click)="addUserService.removeUserToAdd(user.id)"
      >
        ✕
      </span>
    </div>
    } }
  </div>

  <div
    class="overflow-hidden transition-svg-text"
    [ngClass]="{
      'h-0': !showCreateChannelAddPeopleInput,
      'h-[60px]': showCreateChannelAddPeopleInput
    }"
  >
    <div
      class="popup-input-container overflow-visible flex items-center"
      (click)="createChannelAddPeopleInput.focus()"
      (click)="showAddUserToChannelSection($event)"
    >
      <input
        type="text"
        #createChannelAddPeopleInput
        placeholder="Name eingeben"
        [ngClass]="nameInput"
        [(ngModel)]="nameInput"
        (input)="addMemberToNewChannel($event)"
        class="flex relative"
      />
    </div>

    <app-add-user-to-channel-popup
      [display]="showUserPopup"
      [ngClass]="{
        'scale-100 opacity-100 pointer-events-auto': showUserPopup,
        'scale-0 pointer-events-none': !showUserPopup
      }"
      class="absolute left-[40px] w-[400px] mt-[20px] transition-all duration-300 ease-in-out"
      (closePopupEvent)="handleUserPopupClose($event)"
      (clearInputEvent)="handleClearInput()"
    >
    </app-add-user-to-channel-popup>
  </div>

  <div class="flex justify-end">
    <button (click)="createChannel()">Erstellen</button>
  </div>
</section>
